---
title: "Testing"
author: 
  - Names
thanks: "Code and data are available at:"
date: today
date-format: long
abstract: "Write something"
format: pdf
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(knitr)
library(usethis)
library(spotifyr)
library(ggplot2)
```

\newpage

# Introduction

Ed Sheeran is one of the most successful and influential contemporary artists, known for his blend of pop, folk, and acoustic music. His songs are consistently streamed by millions across platforms like Spotify. This report uses data from Spotify to analyze Ed Sheeran’s music over time, exploring key features such as track popularity, duration, and other audio characteristics like energy, danceability, and valence. These metrics provide insight into his evolving musical style and listener preferences.

The remainder of this paper is structured as follows. @sec-data provides a sample look at the data and the data cleaning methodology. @sec-results presents trends in Ed Sheeran's song valency over the years. @sec-discussion dives into the analysis of the trends.

The dataset was downloaded using R [@RCoreTeam2023], and spotify API [@spotifyr], with support using usethis [@usethis]. The dataset was also cleaned and plotted using the tidyverse [@tidyverse], knitr [@knitr], and ggplot2 [@ggplot2] packages. 

# Data {#sec-data}

@tbl-sample is a sample of the downloaded data from @spotifyr, and the columns needed for our analysis.
```{r}
#| label: tbl-sample
#| tbl-cap: "Sample Data"
#| echo: false
#| warning: false
#| message: false

set.seed(123)

ed_sheeran_data <- get_artist_audio_features("ed sheeran")

ed_sheeran_data <- ed_sheeran_data %>% 
  select("album_release_date", "valence")

sample_data <- ed_sheeran_data %>% sample_n(5)

kable(sample_data)
```

# Results

## Valence of Ed Sheeran's Songs Over Time
Valence describes the musical positivity of a track, with higher values indicating happier or more positive songs. In this analysis, we explore how Ed Sheeran’s songs have varied in valence over the course of his career.
```{r}
#| echo: false
#| label: fig-valence-over-time
#| fig-cap: "Valence (Positivity) of Ed Sheeran's Songs Over Time"
ed_sheeran_data %>%
  mutate(album_release_date = as.Date(album_release_date)) %>%
  ggplot(aes(x = album_release_date, y = valence)) +
  geom_point() +
  geom_smooth(method = "loess", color = "green") +
  labs(title = "Valence (Positivity) of Ed Sheeran's Songs Over Time",
       x = "Album Release Date",
       y = "Valence (Positivity)") +
  theme_minimal()

```

As we can see, albums such as No.6 Collaborations Project have higher average danceability, reflecting Ed Sheeran's collaborations with artists known for more upbeat tracks.

# Discussion
This analysis highlights several interesting trends in Ed Sheeran’s music. His song popularity shows spikes around major album releases, and while the duration of his songs remains consistent, the energy, danceability, and valence of his music shift across different albums. These insights reveal the versatility in Ed Sheeran's music style, adapting to different musical influences while maintaining a consistent appeal to his audience.

# Appendix

\newpage

# References
